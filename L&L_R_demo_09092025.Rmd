# ![](images/DARE%20Logo-01.png){width="130"}

# DATA ANALYSIS WITH R

Agenda:

-   Intro to Programming

-   Intro to R and RStudio

-   Demos - 2 workflow examples

-   Hands on activities - piping processes, data reshaping, visualizing, and joining.

Question - How many of you ever used R or familiar with it?

## Introduction

### Programming Concepts

Procedural Programming - Code executes step by step (like following a recipe). - SQL is mostly procedural + declarative (“what to get, not how to compute”).

Functional Programming - Functions are first-class citizens (you can pass them around like values). - R is strongly functional: you clean/transform data by applying functions (filter(), mutate(), etc.). - This makes pipelines (%\>%) so natural in R.

Object-Oriented Programming (OOP) - Organizes code around objects (data + functions bundled together). - Python and Java lean heavily on OOP. - R supports OOP too (S3, S4, R6 classes), but most everyday R code is functional.

### Positioning R

R vs SQL: SQL is great for extracting and transforming data inside a database but less efficient in data cleaning and limited for advanced statistical modeling and visualization. R can pull data out of SQL and take it further:

→ cleaning, reshaping, modeling, visualizing, and reporting all in one workflow.

R vs Python: Python is general-purpose, with wide adoption in software engineering and machine learning. R is purpose-built for statistics and data analysis, with an ecosystem that’s very strong in:

-   Statistical modeling (e.g., regression, survival analysis, time series)
-   Data visualization (ggplot2 ecosystem is unmatched for data storytelling)
-   Interactive reporting (RMarkdown, Shiny).

Who uses R?

Academia & research → statisticians, biologists, social scientists.

Industry → data analysts, data scientists in healthcare, finance, education, and government.\
Everyday analysts who want to go from data → cleaned tables → charts → reports fast.

## How R Works?

R is a programming language but RStudio is an IDE (integrated development environment) such as Microsoft VS Studio.

-   RStudio is an IDE (Integrated Development Environment)
-   Console → run commands interactively.
-   Script pane → save reusable code.
-   Environment pane → see data & variables.
-   Plots/Viewer → immediate output (tables, charts, Shiny apps).

Example R Operations:

```{r}
# 1. Arithmetic
2 + 2
10 / 4

# 2. Variables and assignment
x <- 42
x

# 3. Vectors & Lists
nums <- c(1, 2, 3, 4, 5)
nums
mean(nums)

my_list <- list(number = 42, name = "Alice", scores = c(90, 85, 92))
my_list
my_list$scores

# 4. Sequences
seq(1, 10, by = 2)
1:5

# 5. Data frames
data <- data.frame(Name = c("Alice", "Bob"), Score = c(90, 85))
data

# 6. Summary statistics
View(mtcars)
summary(mtcars$mpg)

# 7. Subsetting & Calling
mtcars[1:5, c("mpg", "cyl", "hp")]
mtcars[, 5]
mtcars$disp

print(unique(mtcars$cyl))
print(nrow(mtcars))

# 8. Basic plot
plot(mtcars$wt, mtcars$mpg, main = "MPG vs Weight", xlab = "Weight", ylab = "MPG")
```

-   Base R vs Packages

    -    Base R comes with built-in functions (e.g., mean(), lm() for regression). The real power comes from packages: add-on libraries contributed by the community.

    -   dplyr, tidyr → data wrangling

    -   ggplot2 → visualization caret,

    -   tidymodels → machine learning shiny,

    -   quarto → reporting & applications

-   Package System Installed from CRAN (official R package repository) or GitHub.

Example:

```{r}
# "?function()" allows for descriptions on the help panel
?data.frame()

# Install packages and load them
install.packages("dplyr")
library(dplyr)
```

Once loaded, functions within that package become available in your session.

**Why R is Unique?**

-   Mixes functional + object-oriented + procedural approaches.

-   Built for data analysis first (where Python was built as general-purpose).

-   Super strong statistical + visualization ecosystem.

-   Easy to prototype → from cleaning → modeling → visualization → reporting.

## Data Preparation Demo 1

```{r}
                        ## BTEC Data Preparation ##
# Load Libraries ----
library(tidyr)
library(dplyr)
library(DBI)

# Connect to the DB ----
conn <- dbConnect(odbc::odbc(),
                  Driver = "SQL Server",
                  Server = "dw.mpsomaha.org",
                  Database = "ST_MPS",
                  Port = 1433)

# Load Data ----
# Load BTEC data from the database
data_btec <- dbGetQuery(conn, "SELECT * FROM BTEC_all")
# Load Data from the student groups table
data_ec <- dbGetQuery(conn, "SELECT * FROM mdw.dbo.FACT_STUDENT_GROUPS_VER2")

# How many students is there in the data?
print(length(unique(data_btec$SIS_NUMBER)))

# Get class of the object
class(data_btec)

# Get basic structure of the data
str(data_btec2)

# Data Preparation ----
data_btec2 <- data_btec %>% 
  # Move some columns
  select(3, 5, 6, 1, 2, 4, everything()) %>% 
  # Save as numeric
  mutate(across(c(SCHOOL_YEAR, Grade, FTE), as.numeric)) %>% 
  # Fill empty GPA rows 
  group_by(SIS_NUMBER) %>% 
  fill(LAST_NAME, FIRST_NAME, FTE, 
    GPA_06, GPA_07, GPA_08, GPA_09, GPA_10, GPA_11, GPA_12, .direction = "downup") %>% 
  # Arrange for student and grade
  arrange(SIS_NUMBER, Grade) %>% 
  # JOIN - Bring early college column
  left_join(data_ec %>% select(SIS_NUMBER, SCHOOL_YEAR_SK, EARLY_COLLEGE, FRPL, SPED, ACP, EL, HAL_MATH, HAL_RDG, HAL_VS, YEARS_IN_MPS), 
            by = c("SIS_NUMBER", "SCHOOL_YEAR" = "SCHOOL_YEAR_SK")) %>% 
  ungroup()
```

```{r}
# 1ggplot2 example
library(ggplot2)
ggplot(mtcars, aes(x = factor(cyl), y = mpg, fill = factor(cyl))) +
  geom_boxplot() +
  labs(x = "Cylinders", y = "Miles per Gallon")
```
